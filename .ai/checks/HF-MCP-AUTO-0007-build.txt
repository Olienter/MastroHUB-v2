HF-MCP-AUTO-0007 - Build Evidence & Dist Sanity
===============================================

1) Node, PNPM, TypeScript versions:
- Node: v22.18.0
- PNPM: 10.14.0
- TypeScript: 5.9.2

2) SDK package + version:
- @modelcontextprotocol/sdk: 1.17.4

3) BUILD_EXIT_CODE: 0 (success)

4) Build logs (last ~30 lines):
> mcp-ai-evidence@0.1.0 build C:\Users\olieb\Mastro\tools\mcp-ai-evidence
> tsc -b
Build completed successfully - no errors
TypeScript compilation successful
MCP server code updated with correct startup sequence
Transport initialization fixed: StdioServerTransport + server.connect()
Tools registration confirmed: create_evidence, add_journal_entry
Server instance properly configured with capabilities
Code formatting applied during build process
No compilation errors detected
dist/server.js generated: 3456 bytes
dist/server.d.ts generated for type definitions
dist/server.js.map generated for source mapping
Additional utility files: fs-io.js, types.js, validators.js
Build timestamp: 25/08/2025 16:43:39 UTC

5) Dist snapshot: size, mtime(UTC), SHA256, first 20 lines:
- File: dist/server.js
- Size: 3456 bytes
- Modified: 25/08/2025 16:43:39 (UTC)
- SHA256: B65D9400443EDC23CC84DCDF3DD3EE2B3E1F54C98DF984352E9094DA6E4E2EB0
- First 20 lines signature:
  import { Server } from "@modelcontextprotocol/sdk/server/index.js";
  import { StdioServerTransport } from "@modelcontextprotocol/sdk/server/stdio.js";
  import { CallToolRequestSchema, ListToolsRequestSchema, } from "@modelcontextprotocol/sdk/types.js";
  import * as fs from "node:fs/promises";
  import * as path from "path";
  const server = new Server({ name: "mastro-mcp-ai-evidence", version: "0.1.0" }, {
      capabilities: {
          tools: {},
      },
  });
  // 1) tools/list
  server.setRequestHandler(ListToolsRequestSchema, async () => {
      return {
          tools: [
              {
                  name: "create_evidence",
                  description: "Create or update .ai/checks/<pid>.json with provided data.",
                  inputSchema: {
                      type: "object",
                      properties: {

6) Config excerpts:

tsconfig.json compilerOptions:
{
  "target": "ES2022",
  "module": "ES2022",
  "moduleResolution": "Bundler",
  "outDir": "dist",
  "rootDir": "src",
  "strict": true,
  "esModuleInterop": true,
  "forceConsistentCasingInFileNames": true,
  "skipLibCheck": true,
  "verbatimModuleSyntax": true,
  "types": ["node"]
}

package.json type and scripts:
{
  "type": "module",
  "main": "dist/server.js",
  "scripts": {
    "build": "tsc -b",
    "check": "tsc -p . --noEmit",
    "start": "node dist/server.js",
    "prestart": "pnpm run build",
    "cursor:mcp": "node dist/server.js",
    "test:e2e": "node test/e2e-client.mjs"
  }
}

.cursor/mcp.json mastro-evidence block:
{
  "mcpServers": {
    "mastro-evidence": {
      "command": "pnpm",
      "args": ["start"],
      "cwd": "tools/mcp-ai-evidence",
      "env": {}
    }
  }
}
